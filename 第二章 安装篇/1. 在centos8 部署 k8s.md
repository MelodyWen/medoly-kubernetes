# 在centos8 部署 k8s

## 1. 检查 centos / hostname
1. 查看centos 的版本，和一些基本信息
    ```
    # 在 master 节点和 worker 节点都要执行
    cat /etc/redhat-release

    # 请使用 lscpu 命令，核对 CPU 信息
    # Architecture: x86_64    本安装文档不支持 arm 架构
    # CPU(s):       2         CPU 内核数量不能低于 2
    lscpu
    ```
2. 查看hostname，必要语义化，而且互相可通过hostname访问
    ```
    # 此处 hostname 的输出将会是该机器在 Kubernetes 集群中的节点名字
    # 不能使用 localhost 作为节点的名字
    hostname

    # 修改 hostname
    hostnamectl set-hostname your-new-host-name

    # 查看修改结果
    hostnamectl status

    # 设置 hostname 解析
    echo "192.168.3.1  master" >> /etc/hosts
    echo "192.168.3.2  node1" >> /etc/hosts
    echo "192.168.3.3  node2" >> /etc/hosts
    ```

## 2.安装一些依赖包
```
yum install -y conntrack ntdate ntp ipvsadm ipset iptables curl sysstat libseccomp wget vim net-tools git
```
## 3. 设置防火墙为iptables 并且设置空规则
```
systemctl stop fire walld && systemctl disable firewalld

yum -y install iptabels-services && systemctl start iptables && systemctl enable iptables && iptables -F && service iptables save
```